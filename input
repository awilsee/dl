bazel-bin/tensorflow/python/tools/freeze_graph\
    --input_graph=/tmp/output_graph.pb \
    --input_binary=true --output_graph=/tmp/frozen_output_graph.pb \
    --output_node_names=InceptionV3/Predictions/Reshape_1

bazel-bin/tensorflow/python/tools/freeze_graph \
  --input_graph=/tmp/output_graph.pb \
  --input_checkpoint=/tmp/checkpoints/model.ckpt-157585 \
  --input_binary=true --output_graph=/tmp/frozen_inception_v3.pb \
  --output_node_names=InceptionV3/Predictions/Reshape_1

bazel-bin/tensorflow/python/tools/optimize_for_inference \
     --input=/tmp/output_graph.pb \
     --output=/tmp/optimized_graph.pb \
     --input_names=input \
     --output_names=output \
     --frozen_graph=True

bazel-bin/tensorflow/python/tools/optimize_for_inference --input=/tmp/output_graph.pb --output=/tmp/optimized_graph.pb --input_names="Mul" --output_names=InceptionV3/Predictions/Reshape_1 --frozen_graph=True 

bazel-bin/tensorflow/python/tools/freeze_graph\
    --input_graph=/tmp/optimized_graph.pb \
    --input_checkpoint=/tmp/checkpoints/model.ckpt-157585 \
    --input_binary=true --output_graph=/tmp/frozen_graph.pb \
    --output_node_names=MobileNet/Predictions/Reshape_1

bazel build tensorflow/tools/graph_transforms:transform_graph
bazel-bin/tensorflow/tools/graph_transforms/transform_graph \
--in_graph=/tmp/optimized_graph.pb \
--out_graph=/tmp/frozen_graph.pb \
--inputs='Mul:0' \
--outputs='softmax:0' \
--transforms='
strip_unused_nodes(type=float, shape="1,299,299,3")
remove_nodes(op=Identity, op=CheckNumerics)
fold_old_batch_norms
'

bazel-bin/tensorflow/contrib/lite/toco/toco -- --input_file=/tmp/frozen_graph.pb --input_format=TENSORFLOW_GRAPHDEF --output_format=TFLITE --output_file=/tmp/inception_v3.tflite --inference_type=FLOAT --input_type=FLOAT --input_arrays=input --output_arrays='final_result' --input_shapes=1,227,227,3

bazel-bin/tensorflow/contrib/lite/toco/toco -- \
  --input_file=/tmp/frozen_graph.pb \
  --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE \
  --output_file=/tmp/inception_v3.tflite --inference_type=FLOAT \
  --input_type=FLOAT --input_arrays='Mul:0' \
  --output_arrays='final_result' --input_shapes=1,299,299,3


bazel-bin/tensorflow/contrib/lite/toco/toco -- \
  --input_file=/tmp/frozen_graph.pb \
  --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE \
  --output_file=/tmp/frozen_graph.lite --inference_type=FLOAT \
  --input_type=FLOAT --input_arrays=input \
  --output_arrays=MobilenetV1/Predictions/Reshape_1 --input_shapes=1,299,299,3

bazel-bin/tensorflow/contrib/lite/toco/toco --input_file=/tmp/frozen_graph.pb --output_file=/tmp/frozen_graph.lite --inputs='Mul:0' --outputs='final_result' --input_type=FLOAT --output_format=TFLITE --input_format=TENSORFLOW_GRAPHDEF --input_arrays=input --input_shapes=1,299,299,3

